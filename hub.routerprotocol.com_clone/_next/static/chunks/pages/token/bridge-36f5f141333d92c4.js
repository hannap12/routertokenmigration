(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{76685:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/token/bridge",function(){return s(5498)}])},5498:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return bridge}});var n=s(85893),a=s(67294),l=s(13144),o=s(92497),r=s(54776),i=s(87066),d=s(57336),c=s(53844),m=s(60755),u=s(25288),x=s(48937),h=s(2925),f=s(59396),g=s(29166),p=s(12257),b=s(38758),j=s(40815),v=s(59046),w=s(92493),N=s(30438),k=s(69077),y=s(20544),C=s(91444),A=s(23407);let E={Polygon:[{name:"Route V2",address:"0x93890f346C5D02C3863a06657bc72555dC72c527"}],Ethereum:[{name:"Route V2",address:"0x60f67e1015b3f069dd4358a78c38f83fe3a667a9"}]},R=a.forwardRef(function(e,t){return(0,n.jsx)(r.Z,{direction:"up",ref:t,...e})});var bridge=e=>{let[t]=(0,l._X)(),[s]=(0,l._b)(),[r,T]=(0,a.useState)(!1),[S,F]=(0,a.useState)(0),[_,Z]=(0,a.useState)(null),[I,O]=(0,a.useState)(!1),[D,U]=(0,a.useState)(!1),[B,G]=(0,a.useState)(""),[M,$]=(0,a.useState)(!1),[P,W]=(0,a.useState)(""),[X,Y]=(0,a.useState)(!1),[V,q]=(0,a.useState)(t),[z,H]=(0,a.useState)("Enter amount"),K=(0,h.Z)(),[L,J]=(0,a.useState)(x.options[0].name),Q=x.chainConfig.filter(e=>e.name===L)[0]||x.chainConfig[0],[ee,et]=(0,a.useState)(E[Q.name][0]),[es,en]=(0,a.useState)(""),[ea,el]=(0,a.useState)(!1),[eo,er]=(0,a.useState)(""),ei=function(e,t){let[s,n]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let s=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(s)}},[e,t]),s}(eo,500),[ed]=(0,l.tX)(),{chain:ec}=(0,k.LN)(),{switchNetworkAsync:em}=(0,k.g0)(),[eu]=(0,l.Gt)(),[ex,eh]=(0,a.useState)(!1),handleOptionClick=e=>{J(e),et(E[e][0]),eh(!1)},ef=(0,a.useCallback)(async()=>{try{$(!0);let[e]=await Promise.all([(0,o.bn)({network:Q,tokenAddress:ee.address,accountAddress:t})]);F(e),$(!1)}catch(e){$(!1),console.error("Error fetching balances:",e)}},[t,S,F,Q,L]),eg=(0,a.useCallback)(async()=>{let e=await (0,o.I4)(ee.address,t,P,Q);return console.log("Fetched Allownce =>",e),en(e||"0"),()=>{}},[Q,t,es,ee,en,P]),ep=(0,a.useCallback)(async e=>{console.log("Quote =>",e,t);try{let s=await i.Z.post("https://api-beta.pathfinder.routerprotocol.com/api/v2/transaction",{...e,senderAddress:t,receiverAddress:V});return console.log("Transaction Data =>",s.data),s.data}catch(e){console.error("fetchTransactionData : ".concat(e))}},[t,V]),eb=(0,a.useCallback)(async()=>{let e;O(!0);try{let t="https://api-beta.pathfinder.routerprotocol.com/api/v2/quote?fromTokenAddress=".concat(ee.address,"&toTokenAddress=","route","&amount=").concat((0,u.Jl)(parseFloat(ei).toFixed(2),18),"&fromTokenChainId=").concat(Q.chainId,"&toTokenChainId=","router_9600-1","&partnerId=","1","&slippageTolerance=","1","\n          ");e=await i.Z.get(t),Z(e.data),W(e.data.allowanceTo),O(!1)}catch(e){var t,s,n,a;Z(null),(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.errorCode)&&(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.error)&&H(e.response.data.error),O(!1),console.log("error",e)}},[t,ei,ee,L]),HandleBridging=async()=>{if(!s){T(!0);return}if(eu===y.UI.keplr){console.error("Please switch wallet to WalletConnect or Metamask"),(0,C.Am)((0,n.jsx)(A.Z,{title:"Please switch wallet to WalletConnect or Metamask",subtitle:""}));return}if((null==ec?void 0:ec.id)!==Number(Q.chainId)&&em&&eu!==y.UI.walletconnect&&(console.log("switching network to",null==ec?void 0:ec.id,"=>",Q.chainId,eu),await (null==em?void 0:em(Number(Q.chainId)))),!(parseFloat(ei)>parseFloat(S.toString()))){if(es<ei){el(!0);let e=await (0,o.Nx)({network:Q,amount:(parseFloat(ei)+.1).toString(),tokenAddress:Q.NEW_TOKEN_ADD,accountAddress:t,contractAddress:P});if(console.log("Source approval tx -",e),!e){el(!1);return}let s=await (0,o.FD)(e.hash,Q);if(s){await eg(),el(!1);return}}if(void 0!==ei&&""!==ei&&"0"!==ei)try{let e=await ep(_);if(!e){el(!1),(0,C.Am)((0,n.jsx)(A.Z,{title:"Failed to fetch quote",subtitle:""}));return}let s=e.txn,a=await (0,N.T7)({to:s.to,value:s.value,data:s.data,chainId:Number(Q.chainId),account:t});G(a.hash),console.log("result",a),await ef(),U(!0),el(!1)}catch(e){el(!1),console.log("error",e)}}};return(0,a.useEffect)(()=>{t&&!V&&q(t)},[t]),(0,a.useEffect)(()=>(eg(),()=>{}),[t,L,P]),(0,a.useEffect)(()=>{ea?H("Waiting For Approval..."):s?""===eo?H("Enter Amount"):parseFloat(eo)>parseFloat(S.toString())?H("Not enough Routes"):I?H("Fetching quote..."):es<eo?H("Approve"):H("Initiate Bridging"):H("Connect Wallet")},[Q,t,V,eo,es,ee,L,es]),(0,a.useEffect)(()=>{""===t?F("0"):ef()},[t,L,ee]),(0,a.useEffect)(()=>{eb()},[ei,t,L,ee]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{open:r,onClose:()=>T(!1),TransitionComponent:R,keepMounted:!0,children:(0,n.jsx)(m.Z,{close:()=>T(!1)})}),(0,n.jsx)(c.Z,{open:D,onClose:()=>U(!1),TransitionComponent:R,keepMounted:!0,children:(0,n.jsx)(p.Z,{close:()=>U(!1),txHash:B,title:"bridge",network:Q})}),(0,n.jsx)(c.Z,{open:X,onClose:()=>Y(!1),TransitionComponent:R,keepMounted:!0,children:(0,n.jsx)(b.Z,{close:()=>Y(!1),reciepientAddress:V,setReciepientAddress:q})}),(0,n.jsxs)("div",{className:"rounded-md lg:px-24 px-4 pt-1 md:mb-8 mb-4 max-w-4xl mx-auto pb-20",children:[(0,n.jsxs)("div",{className:"relative flex flex-col p-3 md:p-8 md:my-8 my-4 bg-cardbg dark:bg-cardbgdark rounded-md min-w-fit md:text-base text-xs",children:[(0,n.jsxs)("a",{target:"_blank",href:"https://routerprotocol.medium.com/comprehensive-route-migration-bridging-and-staking-guide-d0b9f1dd2ef3",className:"hidden md:flex items-center gap-2 text-navlinkcolor absolute right-4 top-6 underline text-sm",children:["Know more",(0,n.jsx)(v.Z,{width:16})]}),(0,n.jsx)(j.Z,{}),(0,n.jsxs)("h1",{className:"md:text-2xl text-lg text-[#2C2C2C] dark:text-cardbg font-bold mb-6  block",children:[(0,n.jsx)("img",{src:"/newroute.svg",className:"md:h-5 h-[18px] ml-1 mb-1 mr-2 self-center inline"}),"Router Chain Bridging Assistant"]}),(0,n.jsx)("p",{className:"text-txt-grey text-sm font-medium w-full",children:"Are you ready to take full advantage of the Router Chain ecosystem? With our latest bridge feature, you can seamlessly transfer your v2 Route tokens to the Router Chain, unlocking a range of new possibilities."})]}),(0,n.jsxs)("div",{className:"p-3 md:p-8 flex flex-col bg-cardbg dark:bg-cardbgdark rounded-md min-w-fit md:text-base text-xs",children:[(0,n.jsxs)("div",{className:"flex justify-between w-full items-center\xa0",children:[(0,n.jsx)("h1",{className:"md:text-2xl text-lg font-bold",children:" Token Bridge Assistant "}),(0,n.jsxs)("div",{className:"relative inline-block text-left",children:[(0,n.jsxs)("button",{type:"button",className:"inline-flex justify-between w-36 rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-none",onClick:()=>{eh(!ex)},children:[(0,n.jsx)("img",{src:Q.iconUrl,className:"md:h-5 h-[18px]"}),L,(0,n.jsx)("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0l-4.25-4.25a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),ex&&(0,n.jsx)("div",{className:"origin-top-right absolute right-0 mt-2 w-36 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",children:(0,n.jsx)("div",{className:"py-1",role:"none",children:x.options.map(e=>(0,n.jsx)("button",{className:"text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 w-full text-left",onClick:()=>handleOptionClick(e.name),children:(0,n.jsxs)("div",{className:"flex items-center justify-normal gap-4 ",children:[(0,n.jsx)("img",{src:e.iconUrl,className:"md:h-5 h-[18px] w-8"}),e.name]})},e.name))})})]})]}),(0,n.jsx)("div",{className:"flex md:flex-row gap-4 justify-start flex-col md:justify-between mt-4 md:mt-8 mb-2 text-sm md:text-base  font-bold",children:(0,n.jsx)("h1",{children:"BRIDGE YOUR ROUTER v2 TOKEN"})}),(0,n.jsxs)("div",{className:"flex flex-col justify-center w-full",children:[(0,n.jsx)("div",{className:"flex md:my-5 my-2",children:(0,n.jsx)("div",{className:"bg-[#EFF2F5] dark:bg-[#06070A] py-4 pl-4 pr-4 w-full rounded-lg shadow-b-3",children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{className:"md:text-xl text-xs font-bold",children:[(0,n.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,n.jsx)("img",{src:"".concat("Route V1"===ee.name?"/route.svg":"/newroute.svg"),className:"md:h-5 h-[18px] ml-1 mb-1 mr-2 self-center inline"}),(0,n.jsx)("span",{children:"v2 $ROUTE"}),(0,n.jsx)("p",{className:" text-[9px] leading-[10px] border-[1px] bg-[#E2E2EA] md:ml-2 md:my-0  my-2 mb-2 px-2 py-1 border-[#8A8A99] rounded-[4px] cursor-pointer w-10",onClick:()=>er((0,u.YG)(S,4)),children:"MAX"})]}),(0,n.jsxs)("p",{className:"block text-xs text-[#6C86AD] mt-2",children:["Balance: "," ",M?(0,n.jsx)(g.$j,{size:"sm"}):(0,u.YG)(S,4)]})]}),(0,n.jsxs)("div",{className:"text-right md:text-2xl text-sm font-bold ",children:[(0,n.jsx)(d.Z,{amount:eo,handleChange:e=>{er(e.target.value)}}),(0,n.jsxs)("p",{className:"block text-xs text-[#6C86AD] mt-2",children:["~$",(0,u.YG)(K(eo),4)]})]})]})})}),(0,n.jsxs)("div",{className:"flex justify-between mb-6 -mt-1 font-bold md:text-xl text-sm",children:[(0,n.jsx)("h1",{className:"text-base md:text-md",children:"Recipient Address"}),V===t||""===V?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex gap-2 items-center font-normal md:text-[15px] text-sm cursor-pointer",onClick:()=>Y(e=>!e),children:[(0,n.jsx)(w.Z,{color:"red",width:20}),"Add Address"]})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"font-normal md:text-[15px] text-sm cursor-pointer",children:[(0,u.Xn)(V)," ","  ",(0,n.jsx)("span",{className:"text-buttonColor",onClick:()=>q(""),children:"Remove"})]})})]}),(0,n.jsxs)("div",{className:"flex justify-between mb-6 font-bold md:text-xl text-sm",children:[(0,n.jsx)("h1",{children:"You Get"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:"/newroute.svg",className:"md:h-5 h-[18px] ml-1 mb-1 mr-2 self-center inline"}),"$ROUTE : ",null===_?"-":(0,u._k)(Number((0,u.og)(_.destination.tokenAmount,f.cR)),6)]})]}),(0,n.jsxs)("div",{className:"text-right text-[13px] text-txt-grey mb-1 font-semibold",children:["$ROUTE token balance :",(0,n.jsx)("img",{src:"".concat("Route V1"===ee.name?"/route.svg":"/newroute.svg"),className:"md:h-5 h-[18px] ml-1 mb-1 mr-2 self-center inline"}),(0,n.jsx)("span",{className:"font-bold text-black",children:M?(0,n.jsx)(g.$j,{size:"sm"}):(0,u.YG)(S,4)})]}),(0,n.jsxs)("button",{type:"button",className:"w-full mb-5 text-cardbg ".concat(null===_||""===eo||!s||I?"bg-[#df3a3ac7]":"bg-[#FF3D00]","  hover:bg-gradient-to-br focus:ring-4 focus:outline-none font-medium rounded-md text-sm px-5 py-3 text-center mr-2  "),onClick:HandleBridging,disabled:null===_||""===eo||!s||I,children:[ea&&(0,n.jsx)(g.$j,{className:"mr-2"}),z]})]})]})]})]})}}},function(e){e.O(0,[556,777,898,810,937,774,888,179],function(){return e(e.s=76685)}),_N_E=e.O()}]);